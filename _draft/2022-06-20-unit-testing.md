---
layout: post
title: "單元測試的基本概念"
author: "Kai-Sheng"
permalink: /articles/unit-testing
categories: [Unit-testing]
image: /assets/image/testability.png
--- 
  

## **什麼是單元測試**

單元測試是以程式碼的最小單位進行測試，用來模擬外部如何使用待測物件，驗證其行為是否符合預期
特性
    -  執行速度快 (測試範圍小)
    -  可靠度高 (確保小部分程式碼在任何機器、任何時間都能正常運作)
    -  有效隔絕失敗 (從數萬行程式碼之間隔絕出可能的錯誤)
-  高品質 (i.e. 可測性高) 的程式，單元測試才會好寫




 
----- 

## **單元測試的重要**
 
 -  更安全的修改程式
-  提高程式碼品質
-  容易在早期就找到 Bug
-  測試案例就是文件 (或測試報告)
-  可以自動化進行回歸測試

為了寫出好讀、好維護、好設計的程式碼與好用的產品。


最後才修改一個 bug 的代價是在 bug 產生時修改它的代價的10倍。——《快速軟體開發》

測試任何可能的錯誤。單元測試不是用來證明您是對的，而是為了證明您沒有錯。

單元測試是編寫測試代碼，用來檢測特定的、明確的、細顆粒的功能。單元測試並不一定保證程序功能是正確的，更不保證整體業務是準備的。

單元測試不僅僅用來保證當前代碼的正確性，更重要的是用來保證代碼修復、改進或重構之後的正確性。
 


----- 

## **從哪裡開始加入單元測試 ?**
-  新功能、新 code
Legacy code 
    -   評估邏輯複雜度
    -   評估依賴數量多寡
    -   評估優先級 (money, bug, importance)

顧名思義很複雜，例如程式有一堆巢狀的if, switch, for等等結構。目前有現成的工具可以查這段 code 的複雜程度。
通常依賴越多，也會較難測，因為需要逐一隔離依賴
優先級:
和錢有關係的
時常壞掉
-   它在產品裡面很重要，萬一有 bug 會發生嚴重的後果
或者是以前在正式環境出現過的 bug。這個是價值最高的 test case

最終可以得出哪些 class 是好測/難測、優先順序






## **如何進行單元測試**
Follow Design Principles
Follow Best Practices of Unit Test




 
 
-----

## **結論**

寫單元測試好處多
提高程式品質，降低開發、除錯、維護成本
好的程式品質才有好的產品

 

### **References**
- [Software testability](https://en.wikipedia.org/wiki/Software_testability)
 